module.exports=[52133,a=>{"use strict";var b=a.i(72358),c=a.i(9981);function d(){let[a,d]=(0,c.useState)(""),[e,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)(""),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!1),m=(0,c.useRef)(null),n=(0,c.useRef)(null),o=(0,c.useRef)(null),p=(0,c.useRef)(!1);async function q(a){f(!0),h(""),j(null);try{let b=await fetch("/api/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:a})}),c=await b.json();if(!b.ok)throw Error(c.error||"Verification failed");j(c.data)}catch(a){h(a.message||"Unexpected error occurred")}finally{f(!1)}}async function r(b){b.preventDefault();let c=a.trim();c?await q(c):h("Please enter student ID")}function s(){l(!1),p.current=!1,o.current&&cancelAnimationFrame(o.current),n.current&&(n.current.getTracks().forEach(a=>a.stop()),n.current=null)}async function t(){try{if(!("BarcodeDetector"in window))throw Error("QR scanner is not supported in this browser");let a=new window.BarcodeDetector({formats:["qr_code"]}),b=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});n.current=b,l(!0),p.current=!0,m.current&&(m.current.srcObject=b,await m.current.play());let c=async()=>{if(m.current&&p.current){try{let b=await a.detect(m.current);if(b.length>0){let a=b[0].rawValue||"",c=a.match(/\/verify\/([^/?#]+)/),e=c?decodeURIComponent(c[1]):a;d(e),s(),await q(e);return}}catch(a){}o.current=requestAnimationFrame(c)}};o.current=requestAnimationFrame(c)}catch(a){h(a.message||"Failed to start scanner"),s()}}let u=i?.issueDate?new Date(i.issueDate).toLocaleString():i?.timestamp?new Date(1e3*Number(i.timestamp)).toLocaleString():null;return(0,b.jsxs)("main",{style:{maxWidth:820,margin:"0 auto",display:"grid",gap:12},children:[(0,b.jsx)("h1",{children:"Employer Verification"}),(0,b.jsxs)("form",{onSubmit:r,style:{display:"grid",gap:8},children:[(0,b.jsx)("input",{value:a,onChange:a=>d(a.target.value),placeholder:"Enter Student ID",style:{padding:"0.6rem"}}),(0,b.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[(0,b.jsx)("button",{type:"submit",disabled:e,children:e?"Verifying...":"Verify"}),k?(0,b.jsx)("button",{type:"button",onClick:s,children:"Stop Scanner"}):(0,b.jsx)("button",{type:"button",onClick:t,children:"Scan QR"})]})]}),k?(0,b.jsx)("video",{ref:m,style:{width:"100%",maxWidth:420,borderRadius:8},muted:!0}):null,g?(0,b.jsx)("p",{style:{color:"crimson"},children:g}):null,i?(0,b.jsxs)("section",{style:{border:"1px solid #ddd",borderRadius:10,padding:"1rem"},children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Name:"})," ",i.fullName||"N/A"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Program:"})," ",i.program||"N/A"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"CGPA:"})," ",i.cgpa??"N/A"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Issuer:"})," ",i.issuer]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Issue Date:"})," ",u||"N/A"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Status:"})," ",i.status||(i.isValid?"Valid":"Revoked")]})]}):null]})}a.s(["default",()=>d])}];

//# sourceMappingURL=Desktop_Fifth%20semester_blockchain_project_frontend_app_verify_page_76345330.js.map