(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,13459,e=>{"use strict";var t=e.i(40025),a=e.i(42432);function d(){let[e,d]=(0,a.useState)(""),[r,i]=(0,a.useState)(""),[n,s]=(0,a.useState)(""),[l,o]=(0,a.useState)(null),[c,u]=(0,a.useState)(""),[p,h]=(0,a.useState)(null),[g,m]=(0,a.useState)({full_name:"",student_id:"",email:"",program:"",enrollment_year:""}),[x,j]=(0,a.useState)({course_code:"",course_name:"",credit_hours:""}),[v,y]=(0,a.useState)({student_id:"",course_code:"",grade:"",semester:"",year:""}),[_,C]=(0,a.useState)({student_id:"",activity_name:"",description:"",participation_date:""}),[b,f]=(0,a.useState)({student_id:"",tuition_paid:!0,clearance_approved:!0}),[S,k]=(0,a.useState)({student_id:"",status:"active",graduation_year:""}),[T,A]=(0,a.useState)("");async function I(e,t,a,d){s(""),u(""),o(null),i(a);try{let a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await a.json();if(!a.ok)throw Error(r.error||"Request failed");u(r.message||"Operation completed"),(r.blockchainTxHash||r.pdfPath)&&o(r),d&&d()}catch(e){s(e.message||"Unexpected error occurred")}finally{i("")}}async function R(t){let a=e.trim();a?await I("issue"===t?"/api/admin/issue-certificate":"/api/admin/revoke",{studentId:a},t):s("Please enter a valid student ID")}async function D(){let e=T.trim();if(!e)return void s("Enter a student ID to view summary");s(""),u(""),i("summary");try{let t=await fetch(`/api/admin/student-summary?studentId=${encodeURIComponent(e)}`),a=await t.json();if(!t.ok)throw Error(a.error||"Failed to fetch summary");h(a.data)}catch(e){s(e.message||"Failed to fetch summary"),h(null)}finally{i("")}}let P="issue"===r,w="revoke"===r,F=!!r;return(0,t.jsxs)("main",{style:{maxWidth:"900px",margin:"0 auto",padding:"2rem 1.25rem",fontFamily:"Arial, sans-serif",display:"grid",gap:"1rem"},children:[(0,t.jsx)("h1",{style:{marginBottom:0},children:"Academic Record Admin Dashboard"}),(0,t.jsx)("p",{style:{marginTop:0},children:"Admin actions are executed via backend API routes only. This keeps private keys in the backend and enforces secure DApp architecture."}),(0,t.jsxs)("section",{style:{border:"1px solid #ddd",borderRadius:12,padding:"1rem",display:"grid",gap:"0.75rem"},children:[(0,t.jsx)("h2",{style:{margin:0},children:"Certificate Operations"}),(0,t.jsx)("label",{htmlFor:"studentId",style:{display:"block",marginBottom:4,fontWeight:700},children:"Student ID"}),(0,t.jsx)("input",{id:"studentId",value:e,onChange:e=>d(e.target.value),placeholder:"e.g. STU-1001",style:{width:"100%",padding:"0.6rem"},disabled:F}),(0,t.jsxs)("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[(0,t.jsx)("button",{onClick:()=>R("issue"),disabled:P||w,style:{minWidth:170},children:P?"Issuing...":"Issue Certificate"}),(0,t.jsx)("button",{onClick:()=>R("revoke"),disabled:P||w,style:{minWidth:170},children:w?"Revoking...":"Revoke Certificate"})]})]}),(0,t.jsxs)("section",{style:{border:"1px solid #ddd",borderRadius:12,padding:"1rem"},children:[(0,t.jsx)("h2",{style:{marginTop:0},children:"Create Student"}),(0,t.jsxs)("div",{style:{display:"grid",gap:8},children:[(0,t.jsx)("input",{placeholder:"Full Name",value:g.full_name,onChange:e=>m(t=>({...t,full_name:e.target.value}))}),(0,t.jsx)("input",{placeholder:"Student ID",value:g.student_id,onChange:e=>m(t=>({...t,student_id:e.target.value}))}),(0,t.jsx)("input",{placeholder:"Email",value:g.email,onChange:e=>m(t=>({...t,email:e.target.value}))}),(0,t.jsx)("input",{placeholder:"Program",value:g.program,onChange:e=>m(t=>({...t,program:e.target.value}))}),(0,t.jsx)("input",{placeholder:"Enrollment Year",value:g.enrollment_year,onChange:e=>m(t=>({...t,enrollment_year:e.target.value}))}),(0,t.jsx)("button",{disabled:F,onClick:()=>I("/api/admin/create-student",g,"create-student",()=>m({full_name:"",student_id:"",email:"",program:"",enrollment_year:""})),children:"create-student"===r?"Creating...":"Create Student"})]})]}),(0,t.jsxs)("section",{style:{border:"1px solid #ddd",borderRadius:12,padding:"1rem"},children:[(0,t.jsx)("h2",{style:{marginTop:0},children:"Create Course"}),(0,t.jsxs)("div",{style:{display:"grid",gap:8},children:[(0,t.jsx)("input",{placeholder:"Course Code",value:x.course_code,onChange:e=>j(t=>({...t,course_code:e.target.value}))}),(0,t.jsx)("input",{placeholder:"Course Name",value:x.course_name,onChange:e=>j(t=>({...t,course_name:e.target.value}))}),(0,t.jsx)("input",{placeholder:"Credit Hours",value:x.credit_hours,onChange:e=>j(t=>({...t,credit_hours:e.target.value}))}),(0,t.jsx)("button",{disabled:F,onClick:()=>I("/api/admin/create-course",x,"create-course",()=>j({course_code:"",course_name:"",credit_hours:""})),children:"create-course"===r?"Creating...":"Create Course"})]})]}),(0,t.jsxs)("section",{style:{border:"1px solid #ddd",borderRadius:12,padding:"1rem"},children:[(0,t.jsx)("h2",{style:{marginTop:0},children:"Update Student Status"}),(0,t.jsxs)("div",{style:{display:"grid",gap:8},children:[(0,t.jsx)("input",{placeholder:"Student ID",value:S.student_id,onChange:e=>k(t=>({...t,student_id:e.target.value}))}),(0,t.jsxs)("select",{value:S.status,onChange:e=>k(t=>({...t,status:e.target.value})),children:[(0,t.jsx)("option",{value:"active",children:"Active"}),(0,t.jsx)("option",{value:"graduated",children:"Graduated"})]}),(0,t.jsx)("input",{placeholder:"Graduation Year (required if Graduated)",value:S.graduation_year,onChange:e=>k(t=>({...t,graduation_year:e.target.value})),disabled:"graduated"!==S.status}),(0,t.jsx)("button",{disabled:F,onClick:()=>I("/api/admin/update-student-status",S,"update-student-status",()=>k({student_id:"",status:"active",graduation_year:""})),children:"update-student-status"===r?"Updating...":"Update Status"})]})]}),(0,t.jsxs)("section",{style:{border:"1px solid #ddd",borderRadius:12,padding:"1rem"},children:[(0,t.jsx)("h2",{style:{marginTop:0},children:"Assign Course Grade"}),(0,t.jsxs)("div",{style:{display:"grid",gap:8},children:[(0,t.jsx)("input",{placeholder:"Student ID",value:v.student_id,onChange:e=>y(t=>({...t,student_id:e.target.value}))}),(0,t.jsx)("input",{placeholder:"Course Code",value:v.course_code,onChange:e=>y(t=>({...t,course_code:e.target.value}))}),(0,t.jsx)("input",{placeholder:"Grade (e.g. A, B+)",value:v.grade,onChange:e=>y(t=>({...t,grade:e.target.value}))}),(0,t.jsx)("input",{placeholder:"Semester (e.g. Fall)",value:v.semester,onChange:e=>y(t=>({...t,semester:e.target.value}))}),(0,t.jsx)("input",{placeholder:"Year",value:v.year,onChange:e=>y(t=>({...t,year:e.target.value}))}),(0,t.jsx)("button",{disabled:F,onClick:()=>I("/api/admin/assign-grade",v,"assign-grade",()=>y({student_id:"",course_code:"",grade:"",semester:"",year:""})),children:"assign-grade"===r?"Saving...":"Assign Grade"})]})]}),(0,t.jsxs)("section",{style:{border:"1px solid #ddd",borderRadius:12,padding:"1rem"},children:[(0,t.jsx)("h2",{style:{marginTop:0},children:"Record Activity Participation"}),(0,t.jsxs)("div",{style:{display:"grid",gap:8},children:[(0,t.jsx)("input",{placeholder:"Student ID",value:_.student_id,onChange:e=>C(t=>({...t,student_id:e.target.value}))}),(0,t.jsx)("input",{placeholder:"Activity Name",value:_.activity_name,onChange:e=>C(t=>({...t,activity_name:e.target.value}))}),(0,t.jsx)("input",{placeholder:"Description (optional)",value:_.description,onChange:e=>C(t=>({...t,description:e.target.value}))}),(0,t.jsx)("input",{type:"date",value:_.participation_date,onChange:e=>C(t=>({...t,participation_date:e.target.value}))}),(0,t.jsx)("button",{disabled:F,onClick:()=>I("/api/admin/add-activity",_,"add-activity",()=>C({student_id:"",activity_name:"",description:"",participation_date:""})),children:"add-activity"===r?"Saving...":"Add Activity"})]})]}),(0,t.jsxs)("section",{style:{border:"1px solid #ddd",borderRadius:12,padding:"1rem"},children:[(0,t.jsx)("h2",{style:{marginTop:0},children:"Approve Financial Clearance"}),(0,t.jsxs)("div",{style:{display:"grid",gap:8},children:[(0,t.jsx)("input",{placeholder:"Student ID",value:b.student_id,onChange:e=>f(t=>({...t,student_id:e.target.value}))}),(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"checkbox",checked:b.tuition_paid,onChange:e=>f(t=>({...t,tuition_paid:e.target.checked}))})," ","Tuition Paid"]}),(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"checkbox",checked:b.clearance_approved,onChange:e=>f(t=>({...t,clearance_approved:e.target.checked}))})," ","Clearance Approved"]}),(0,t.jsx)("button",{disabled:F,onClick:()=>I("/api/admin/approve-clearance",b,"approve-clearance",()=>f({student_id:"",tuition_paid:!0,clearance_approved:!0})),children:"approve-clearance"===r?"Updating...":"Approve Clearance"})]})]}),(0,t.jsxs)("section",{style:{border:"1px solid #ddd",borderRadius:12,padding:"1rem"},children:[(0,t.jsx)("h2",{style:{marginTop:0},children:"View Student Academic Summary"}),(0,t.jsxs)("div",{style:{display:"grid",gap:8},children:[(0,t.jsx)("input",{placeholder:"Student ID",value:T,onChange:e=>A(e.target.value)}),(0,t.jsx)("button",{disabled:F,onClick:D,children:"summary"===r?"Loading...":"View Summary"})]}),p?(0,t.jsxs)("div",{style:{marginTop:12,borderTop:"1px solid #eee",paddingTop:10},children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Name:"})," ",p.student.fullName]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Program:"})," ",p.student.program]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"CGPA:"})," ",p.cgpa]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Financial Clearance:"})," ",p.financial.clearance_approved?"Approved":"Pending"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Certificate:"})," ",p.certificate.issued?p.certificate.status:"Not issued"]})]}):null]}),n?(0,t.jsx)("section",{style:{border:"1px solid #ffc9c9",borderRadius:10,padding:"0.9rem"},children:(0,t.jsxs)("p",{style:{color:"crimson",margin:0},children:[(0,t.jsx)("strong",{children:"Error:"})," ",n]})}):null,c?(0,t.jsx)("section",{style:{border:"1px solid #b7e4c7",borderRadius:10,padding:"0.9rem"},children:(0,t.jsx)("p",{style:{color:"green",margin:0},children:c})}):null,l?(0,t.jsxs)("section",{style:{border:"1px solid #ddd",borderRadius:12,padding:"1rem"},children:[(0,t.jsx)("h3",{style:{marginTop:0},children:"Operation Result"}),(0,t.jsxs)("div",{style:{display:"grid",gap:"0.4rem"},children:[l.studentId?(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Student ID:"})," ",l.studentId]}):null,null!=l.cgpa?(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"CGPA:"})," ",l.cgpa]}):null,l.documentHash?(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Document Hash:"})," ",l.documentHash]}):null,l.blockchainTxHash?(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Blockchain Tx:"})," ",l.blockchainTxHash]}):null,l.pdfPath?(0,t.jsx)("p",{children:(0,t.jsx)("a",{href:l.pdfPath,target:"_blank",rel:"noreferrer",children:"Download Generated Certificate PDF"})}):null]})]}):null]})}e.s(["default",()=>d])}]);