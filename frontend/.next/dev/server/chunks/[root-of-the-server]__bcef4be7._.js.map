{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ahmed/Desktop/Fifth%20semester/blockchain/project/frontend/app/lib/db.js"],"sourcesContent":["import mysql from \"mysql2/promise\";\r\n\r\nlet pool;\r\n\r\nfunction createPool() {\r\n  const parsedPort = process.env.DB_PORT ? Number(process.env.DB_PORT) : 3306;\r\n\r\n  return mysql.createPool({\r\n    host: process.env.DB_HOST,\r\n    user: process.env.DB_USER,\r\n    password: process.env.DB_PASSWORD,\r\n    database: process.env.DB_NAME || \"academic_system\",\r\n    waitForConnections: true,\r\n    port: Number.isNaN(parsedPort) ? 3306 : parsedPort,\r\n    connectionLimit: 10,\r\n    queueLimit: 0,\r\n  });\r\n}\r\n\r\nexport async function getPool() {\r\n  try {\r\n    if (!pool) {\r\n      pool = createPool();\r\n    }\r\n\r\n    // Lightweight health-check to fail fast if DB credentials are invalid.\r\n    await pool.query(\"SELECT 1\");\r\n    return pool;\r\n  } catch (error) {\r\n    console.error(\"Database connection error:\", error);\r\n    throw new Error(\"Failed to connect to MySQL\");\r\n  }\r\n}\r\n\r\nexport async function executeQuery(sql, params = []) {\r\n  try {\r\n    const db = await getPool();\r\n    const [result] = await db.execute(sql, params);\r\n    return result;\r\n  } catch (error) {\r\n    console.error(\"Database query error:\", error);\r\n    throw new Error(\"Database query failed\");\r\n  }\r\n}\r\n\r\nexport { pool };\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,IAAI;AAEJ,SAAS;IACP,MAAM,aAAa,QAAQ,GAAG,CAAC,OAAO,GAAG,OAAO,QAAQ,GAAG,CAAC,OAAO,IAAI;IAEvE,OAAO,iNAAK,CAAC,UAAU,CAAC;QACtB,MAAM,QAAQ,GAAG,CAAC,OAAO;QACzB,MAAM,QAAQ,GAAG,CAAC,OAAO;QACzB,UAAU,QAAQ,GAAG,CAAC,WAAW;QACjC,UAAU,QAAQ,GAAG,CAAC,OAAO,IAAI;QACjC,oBAAoB;QACpB,MAAM,OAAO,KAAK,CAAC,cAAc,OAAO;QACxC,iBAAiB;QACjB,YAAY;IACd;AACF;AAEO,eAAe;IACpB,IAAI;QACF,IAAI,CAAC,MAAM;YACT,OAAO;QACT;QAEA,uEAAuE;QACvE,MAAM,KAAK,KAAK,CAAC;QACjB,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,MAAM,IAAI,MAAM;IAClB;AACF;AAEO,eAAe,aAAa,GAAG,EAAE,SAAS,EAAE;IACjD,IAAI;QACF,MAAM,KAAK,MAAM;QACjB,MAAM,CAAC,OAAO,GAAG,MAAM,GAAG,OAAO,CAAC,KAAK;QACvC,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM,IAAI,MAAM;IAClB;AACF"}},
    {"offset": {"line": 211, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/Desktop/Fifth semester/blockchain/project/frontend/app/abi.json"],"sourcesContent":["[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"string\",\"name\":\"studentId\",\"type\":\"string\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"documentHash\",\"type\":\"string\"}],\"name\":\"RecordIssued\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"string\",\"name\":\"studentId\",\"type\":\"string\"}],\"name\":\"RecordRevoked\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"admin\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"_studentId\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"_documentHash\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"_issuer\",\"type\":\"string\"}],\"name\":\"issueRecord\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"_studentId\",\"type\":\"string\"}],\"name\":\"revokeRecord\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"_studentId\",\"type\":\"string\"}],\"name\":\"verifyRecord\",\"outputs\":[{\"components\":[{\"internalType\":\"string\",\"name\":\"studentId\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"documentHash\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"issuer\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"timestamp\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"isValid\",\"type\":\"bool\"}],\"internalType\":\"struct AcademicRecords.Record\",\"name\":\"\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]"],"names":[],"mappings":"AAAA"}},
    {"offset": {"line": 211, "column": 1585}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ahmed/Desktop/Fifth%20semester/blockchain/project/frontend/app/lib/blockchain.js"],"sourcesContent":["import { ethers } from \"ethers\";\r\nimport ABI from \"../abi.json\";\r\n\r\nfunction validateEnv() {\r\n  const required = [\"PRIVATE_KEY\", \"CONTRACT_ADDRESS\"];\r\n  const missing = required.filter((key) => !process.env[key]);\r\n\r\n  if (missing.length > 0) {\r\n    throw new Error(`Missing required environment variables: ${missing.join(\", \")}`);\r\n  }\r\n}\r\n\r\nvalidateEnv();\r\n\r\n// Provider = read/write connection to the Ethereum JSON-RPC node.\r\n// It talks to Hardhat local chain at http://127.0.0.1:8545.\r\nconst provider = new ethers.JsonRpcProvider(process.env.RPC_URL || \"http://127.0.0.1:8545\");\r\n\r\n// Wallet = backend signing identity. Every state-changing tx is signed with\r\n// this private key before being broadcast. The key must stay server-side only.\r\nconst wallet = new ethers.Wallet(process.env.PRIVATE_KEY, provider);\r\n\r\n// Contract instance bound to the signing wallet.\r\n// Digital signature flow:\r\n// 1) API route calls a write method (e.g., issueRecord).\r\n// 2) ethers prepares transaction data.\r\n// 3) wallet signs tx with PRIVATE_KEY.\r\n// 4) signed tx is sent to chain and validated by nodes.\r\nconst contract = new ethers.Contract(process.env.CONTRACT_ADDRESS, ABI, wallet);\r\n\r\nlet contractCodeValidated = false;\r\n\r\nexport async function ensureContractIsDeployed() {\r\n  if (contractCodeValidated) {\r\n    return;\r\n  }\r\n\r\n  const code = await provider.getCode(process.env.CONTRACT_ADDRESS);\r\n  if (!code || code === \"0x\") {\r\n    throw new Error(\r\n      \"Invalid CONTRACT_ADDRESS: no contract bytecode found. Set CONTRACT_ADDRESS to the deployed AcademicRecords contract address.\"\r\n    );\r\n  }\r\n\r\n  contractCodeValidated = true;\r\n}\r\n\r\nexport { provider, wallet, contract };\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAEA,SAAS;IACP,MAAM,WAAW;QAAC;QAAe;KAAmB;IACpD,MAAM,UAAU,SAAS,MAAM,CAAC,CAAC,MAAQ,CAAC,QAAQ,GAAG,CAAC,IAAI;IAE1D,IAAI,QAAQ,MAAM,GAAG,GAAG;QACtB,MAAM,IAAI,MAAM,CAAC,wCAAwC,EAAE,QAAQ,IAAI,CAAC,OAAO;IACjF;AACF;AAEA;AAEA,kEAAkE;AAClE,4DAA4D;AAC5D,MAAM,WAAW,IAAI,+PAAM,CAAC,eAAe,CAAC,QAAQ,GAAG,CAAC,OAAO,IAAI;AAEnE,4EAA4E;AAC5E,+EAA+E;AAC/E,MAAM,SAAS,IAAI,+PAAM,CAAC,MAAM,CAAC,QAAQ,GAAG,CAAC,WAAW,EAAE;AAE1D,iDAAiD;AACjD,0BAA0B;AAC1B,yDAAyD;AACzD,uCAAuC;AACvC,uCAAuC;AACvC,wDAAwD;AACxD,MAAM,WAAW,IAAI,+PAAM,CAAC,QAAQ,CAAC,QAAQ,GAAG,CAAC,gBAAgB,EAAE,gKAAG,EAAE;AAExE,IAAI,wBAAwB;AAErB,eAAe;IACpB,IAAI,uBAAuB;QACzB;IACF;IAEA,MAAM,OAAO,MAAM,SAAS,OAAO,CAAC,QAAQ,GAAG,CAAC,gBAAgB;IAChE,IAAI,CAAC,QAAQ,SAAS,MAAM;QAC1B,MAAM,IAAI,MACR;IAEJ;IAEA,wBAAwB;AAC1B"}},
    {"offset": {"line": 269, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ahmed/Desktop/Fifth%20semester/blockchain/project/frontend/app/api/admin/issue-certificate/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { createHash } from \"crypto\";\r\nimport fs from \"fs\";\r\nimport path from \"path\";\r\nimport PDFDocument from \"pdfkit\";\r\nimport QRCode from \"qrcode\";\r\nimport { getPool } from \"../../../lib/db\";\r\nimport { contract, ensureContractIsDeployed } from \"../../../lib/blockchain\";\r\n\r\nexport const runtime = \"nodejs\";\r\n\r\nasync function getTableColumns(connection, tableName) {\r\n  const [rows] = await connection.execute(`SHOW COLUMNS FROM ${tableName}`);\r\n  return new Set(rows.map((row) => String(row.Field).toLowerCase()));\r\n}\r\n\r\nfunction normalizeStatus(value) {\r\n  return String(value || \"\")\r\n    .trim()\r\n    .toLowerCase();\r\n}\r\n\r\nfunction gradeToPoint(grade) {\r\n  const map = {\r\n    \"A+\": 4.0,\r\n    A: 4.0,\r\n    \"A-\": 3.7,\r\n    \"B+\": 3.3,\r\n    B: 3.0,\r\n    \"B-\": 2.7,\r\n    \"C+\": 2.3,\r\n    C: 2.0,\r\n    \"C-\": 1.7,\r\n    \"D+\": 1.3,\r\n    D: 1.0,\r\n    F: 0.0,\r\n  };\r\n\r\n  return map[String(grade || \"\").toUpperCase()];\r\n}\r\n\r\nfunction calculateCgpa(courses) {\r\n  let totalWeightedPoints = 0;\r\n  let totalCredits = 0;\r\n\r\n  for (const course of courses) {\r\n    const creditHours = Number(course.credit_hours ?? 0);\r\n    const gradePointFromRow = Number(course.grade_point);\r\n    const derivedGradePoint = Number.isFinite(gradePointFromRow)\r\n      ? gradePointFromRow\r\n      : gradeToPoint(course.grade);\r\n\r\n    if (creditHours > 0 && Number.isFinite(derivedGradePoint)) {\r\n      totalWeightedPoints += derivedGradePoint * creditHours;\r\n      totalCredits += creditHours;\r\n    }\r\n  }\r\n\r\n  if (totalCredits === 0) {\r\n    return null;\r\n  }\r\n\r\n  return Number((totalWeightedPoints / totalCredits).toFixed(2));\r\n}\r\n\r\nfunction resolvePdfFontPath() {\r\n  const candidates = [\r\n    process.env.PDF_FONT_PATH,\r\n    \"C:\\\\Windows\\\\Fonts\\\\arial.ttf\",\r\n    \"C:\\\\Windows\\\\Fonts\\\\calibri.ttf\",\r\n    \"/usr/share/fonts/truetype/dejavu/DejaVuSans.ttf\",\r\n    \"/usr/share/fonts/truetype/liberation/LiberationSans-Regular.ttf\",\r\n  ].filter(Boolean);\r\n\r\n  return candidates.find((candidate) => fs.existsSync(candidate)) || null;\r\n}\r\n\r\nasync function writePdf({ studentId, fullName, program, cgpa, graduationYear }) {\r\n  const safeStudentId = String(studentId).replace(/[^a-zA-Z0-9_-]/g, \"_\");\r\n  const certificatesDir = path.join(process.cwd(), \"public\", \"uploads\", \"certificates\");\r\n  const fileName = `${safeStudentId}.pdf`;\r\n  const absolutePath = path.join(certificatesDir, fileName);\r\n  const publicPath = `/uploads/certificates/${fileName}`;\r\n\r\n  await fs.promises.mkdir(certificatesDir, { recursive: true });\r\n\r\n  const verificationUrl = `http://localhost:3000/verify/${encodeURIComponent(studentId)}`;\r\n  const qrDataUrl = await QRCode.toDataURL(verificationUrl);\r\n  const qrBuffer = Buffer.from(qrDataUrl.split(\",\")[1], \"base64\");\r\n  const fontPath = resolvePdfFontPath();\r\n\r\n  await new Promise((resolve, reject) => {\r\n    // Use a real TTF font file to avoid runtime lookup issues for bundled AFM files.\r\n    const doc = new PDFDocument({ size: \"A4\", margin: 50, font: fontPath || undefined });\r\n    const stream = fs.createWriteStream(absolutePath);\r\n\r\n    stream.on(\"finish\", resolve);\r\n    stream.on(\"error\", reject);\r\n    doc.on(\"error\", reject);\r\n    doc.pipe(stream);\r\n\r\n    doc.fontSize(24).text(\"University Academic Certificate\", { align: \"center\" });\r\n    doc.moveDown(1.5);\r\n    doc.fontSize(14).text(`Student Name: ${fullName}`);\r\n    doc.text(`Student ID: ${studentId}`);\r\n    doc.text(`Program: ${program}`);\r\n    doc.text(`CGPA: ${cgpa.toFixed(2)}`);\r\n    doc.text(`Graduation Year: ${graduationYear}`);\r\n    doc.moveDown(1.5);\r\n    doc.fontSize(11).text(\"Scan QR to verify certificate:\", { align: \"left\" });\r\n    doc.image(qrBuffer, { fit: [120, 120] });\r\n    doc.moveDown();\r\n    doc.fontSize(10).fillColor(\"gray\").text(verificationUrl);\r\n    doc.end();\r\n  });\r\n\r\n  return publicPath;\r\n}\r\n\r\nasync function isAlreadyIssuedOnChain(studentId) {\r\n  try {\r\n    const record = await contract.verifyRecord(studentId);\r\n    return Boolean(record?.timestamp && record.timestamp.toString() !== \"0\");\r\n  } catch (_error) {\r\n    // verifyRecord reverts when record does not exist\r\n    return false;\r\n  }\r\n}\r\n\r\nexport async function POST(request) {\r\n  let connection;\r\n\r\n  try {\r\n    await ensureContractIsDeployed();\r\n    const body = await request.json();\r\n    const { studentId } = body;\r\n\r\n    if (!studentId || !String(studentId).trim()) {\r\n      return NextResponse.json({ success: false, error: \"studentId is required\" }, { status: 400 });\r\n    }\r\n\r\n    const normalizedStudentId = String(studentId).trim();\r\n    const pool = await getPool();\r\n    connection = await pool.getConnection();\r\n    await connection.beginTransaction();\r\n\r\n    const [students] = await connection.execute(\r\n      `\r\n        SELECT\r\n          s.student_id,\r\n          s.full_name,\r\n          s.program,\r\n          s.graduation_year,\r\n          s.status,\r\n          COALESCE(fr.clearance_approved, 0) AS financial_clearance,\r\n          COALESCE(GROUP_CONCAT(a.activity_name ORDER BY a.activity_name SEPARATOR ', '), '') AS activities_summary\r\n        FROM students s\r\n        LEFT JOIN financial_records fr ON fr.student_id = s.student_id\r\n        LEFT JOIN student_activities sa ON sa.student_id = s.student_id\r\n        LEFT JOIN activities a ON a.id = sa.activity_id\r\n        WHERE s.student_id = ?\r\n        GROUP BY\r\n          s.student_id, s.full_name, s.program, s.graduation_year, s.status, fr.clearance_approved\r\n        LIMIT 1\r\n      `,\r\n      [normalizedStudentId]\r\n    );\r\n\r\n    if (students.length === 0) {\r\n      await connection.rollback();\r\n      return NextResponse.json({ success: false, error: \"Student not found\" }, { status: 404 });\r\n    }\r\n\r\n    const student = students[0];\r\n    const status = normalizeStatus(student.status);\r\n    if (status !== \"graduated\") {\r\n      await connection.rollback();\r\n      return NextResponse.json(\r\n        { success: false, error: \"Student is not eligible: status must be graduated\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    if (!Boolean(student.financial_clearance)) {\r\n      await connection.rollback();\r\n      return NextResponse.json(\r\n        { success: false, error: \"Financial clearance is not approved\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const [existingCertificates] = await connection.execute(\r\n      `\r\n        SELECT id, is_revoked\r\n        FROM certificates\r\n        WHERE student_id = ?\r\n        ORDER BY id DESC\r\n        LIMIT 1\r\n      `,\r\n      [normalizedStudentId]\r\n    );\r\n\r\n    if (existingCertificates.length > 0) {\r\n      const existing = existingCertificates[0];\r\n      if (Boolean(existing.is_revoked)) {\r\n        await connection.rollback();\r\n        return NextResponse.json(\r\n          { success: false, error: \"Cannot issue certificate again for a revoked record\" },\r\n          { status: 400 }\r\n        );\r\n      }\r\n\r\n      await connection.rollback();\r\n      return NextResponse.json(\r\n        { success: false, error: \"Certificate already issued for this student\" },\r\n        { status: 409 }\r\n      );\r\n    }\r\n\r\n    const [courses] = await connection.execute(\r\n      `\r\n        SELECT sc.grade, c.credit_hours\r\n        FROM student_courses sc\r\n        INNER JOIN courses c ON c.course_code = sc.course_code\r\n        WHERE sc.student_id = ?\r\n      `,\r\n      [normalizedStudentId]\r\n    );\r\n\r\n    const cgpa = calculateCgpa(courses);\r\n    if (cgpa === null) {\r\n      await connection.rollback();\r\n      return NextResponse.json(\r\n        { success: false, error: \"Unable to calculate CGPA from student_courses\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const graduationYear = Number(student.graduation_year);\r\n    const graduationDate = Number.isFinite(graduationYear)\r\n      ? `${graduationYear}-06-30`\r\n      : new Date().toISOString().slice(0, 10);\r\n\r\n    const academicString = `${normalizedStudentId}|${student.full_name}|${student.program}|${cgpa.toFixed(2)}|${student.graduation_year}`;\r\n    const documentHash = createHash(\"sha256\").update(academicString).digest(\"hex\");\r\n\r\n    const onChainExists = await isAlreadyIssuedOnChain(normalizedStudentId);\r\n    if (onChainExists) {\r\n      await connection.rollback();\r\n      return NextResponse.json(\r\n        { success: false, error: \"Certificate already exists on blockchain for this student\" },\r\n        { status: 409 }\r\n      );\r\n    }\r\n\r\n    const tx = await contract.issueRecord(normalizedStudentId, documentHash, \"University\");\r\n    const receipt = await tx.wait();\r\n\r\n    const pdfPath = await writePdf({\r\n      studentId: normalizedStudentId,\r\n      fullName: student.full_name,\r\n      program: student.program,\r\n      cgpa,\r\n      graduationYear: student.graduation_year,\r\n    });\r\n\r\n    const certificateColumns = await getTableColumns(connection, \"certificates\");\r\n    const insertColumns = [\"student_id\"];\r\n    const insertParams = [normalizedStudentId];\r\n    const valueTokens = [\"?\"];\r\n\r\n    // Snapshot issuance-time academic fields to support tamper detection later.\r\n    if (certificateColumns.has(\"full_name\")) {\r\n      insertColumns.push(\"full_name\");\r\n      valueTokens.push(\"?\");\r\n      insertParams.push(student.full_name);\r\n    }\r\n    if (certificateColumns.has(\"program\")) {\r\n      insertColumns.push(\"program\");\r\n      valueTokens.push(\"?\");\r\n      insertParams.push(student.program);\r\n    }\r\n\r\n    insertColumns.push(\"cgpa\");\r\n    valueTokens.push(\"?\");\r\n    insertParams.push(cgpa);\r\n\r\n    insertColumns.push(\"graduation_date\");\r\n    valueTokens.push(\"?\");\r\n    insertParams.push(graduationDate);\r\n\r\n    insertColumns.push(\"document_hash\");\r\n    valueTokens.push(\"?\");\r\n    insertParams.push(documentHash);\r\n\r\n    insertColumns.push(\"contract_address\");\r\n    valueTokens.push(\"?\");\r\n    insertParams.push(process.env.CONTRACT_ADDRESS);\r\n\r\n    insertColumns.push(\"issued_at\");\r\n    valueTokens.push(\"NOW()\");\r\n\r\n    insertColumns.push(\"blockchain_tx_hash\");\r\n    valueTokens.push(\"?\");\r\n    insertParams.push(receipt.hash);\r\n\r\n    insertColumns.push(\"is_revoked\");\r\n    valueTokens.push(\"0\");\r\n\r\n    // Optional column for storing generated certificate path if the schema has it.\r\n    if (certificateColumns.has(\"pdf_path\")) {\r\n      insertColumns.push(\"pdf_path\");\r\n      valueTokens.push(\"?\");\r\n      insertParams.push(pdfPath);\r\n    }\r\n\r\n    const [result] = await connection.execute(\r\n      `\r\n        INSERT INTO certificates (${insertColumns.join(\", \")})\r\n        VALUES (${valueTokens.join(\", \")})\r\n      `,\r\n      insertParams\r\n    );\r\n\r\n    await connection.commit();\r\n\r\n    return NextResponse.json(\r\n      {\r\n        success: true,\r\n        message: \"Certificate issued successfully\",\r\n        certificateId: result.insertId,\r\n        studentId: normalizedStudentId,\r\n        cgpa,\r\n        documentHash,\r\n        blockchainTxHash: receipt.hash,\r\n        pdfPath,\r\n        activitiesSummary: student.activities_summary,\r\n      },\r\n      { status: 201 }\r\n    );\r\n  } catch (error) {\r\n    if (connection) {\r\n      try {\r\n        await connection.rollback();\r\n      } catch (rollbackError) {\r\n        console.error(\"Rollback failed:\", rollbackError);\r\n      }\r\n    }\r\n\r\n    console.error(\"Admin issue-certificate error:\", error);\r\n    return NextResponse.json(\r\n      { success: false, error: error.shortMessage || error.message || \"Internal server error\" },\r\n      { status: 500 }\r\n    );\r\n  } finally {\r\n    if (connection) {\r\n      connection.release();\r\n    }\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}}]
}