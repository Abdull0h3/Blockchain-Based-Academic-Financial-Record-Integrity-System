{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/Desktop/Fifth semester/blockchain/project/frontend/app/abi.json"],"sourcesContent":["[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"string\",\"name\":\"studentId\",\"type\":\"string\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"documentHash\",\"type\":\"string\"}],\"name\":\"RecordIssued\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"string\",\"name\":\"studentId\",\"type\":\"string\"}],\"name\":\"RecordRevoked\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"admin\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"_studentId\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"_documentHash\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"_issuer\",\"type\":\"string\"}],\"name\":\"issueRecord\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"_studentId\",\"type\":\"string\"}],\"name\":\"revokeRecord\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"_studentId\",\"type\":\"string\"}],\"name\":\"verifyRecord\",\"outputs\":[{\"components\":[{\"internalType\":\"string\",\"name\":\"studentId\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"documentHash\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"issuer\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"timestamp\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"isValid\",\"type\":\"bool\"}],\"internalType\":\"struct AcademicRecords.Record\",\"name\":\"\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]"],"names":[],"mappings":"AAAA"}},
    {"offset": {"line": 111, "column": 1585}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 115, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ahmed/Desktop/Fifth%20semester/blockchain/project/frontend/app/lib/blockchain.js"],"sourcesContent":["import { ethers } from \"ethers\";\r\nimport ABI from \"../abi.json\";\r\n\r\nfunction validateEnv() {\r\n  const required = [\"PRIVATE_KEY\", \"CONTRACT_ADDRESS\"];\r\n  const missing = required.filter((key) => !process.env[key]);\r\n\r\n  if (missing.length > 0) {\r\n    throw new Error(`Missing required environment variables: ${missing.join(\", \")}`);\r\n  }\r\n}\r\n\r\nvalidateEnv();\r\n\r\n// Provider = read/write connection to the Ethereum JSON-RPC node.\r\n// It talks to Hardhat local chain at http://127.0.0.1:8545.\r\nconst provider = new ethers.JsonRpcProvider(process.env.RPC_URL || \"http://127.0.0.1:8545\");\r\n\r\n// Wallet = backend signing identity. Every state-changing tx is signed with\r\n// this private key before being broadcast. The key must stay server-side only.\r\nconst wallet = new ethers.Wallet(process.env.PRIVATE_KEY, provider);\r\n\r\n// Contract instance bound to the signing wallet.\r\n// Digital signature flow:\r\n// 1) API route calls a write method (e.g., issueRecord).\r\n// 2) ethers prepares transaction data.\r\n// 3) wallet signs tx with PRIVATE_KEY.\r\n// 4) signed tx is sent to chain and validated by nodes.\r\nconst contract = new ethers.Contract(process.env.CONTRACT_ADDRESS, ABI, wallet);\r\n\r\nlet contractCodeValidated = false;\r\n\r\nexport async function ensureContractIsDeployed() {\r\n  if (contractCodeValidated) {\r\n    return;\r\n  }\r\n\r\n  const code = await provider.getCode(process.env.CONTRACT_ADDRESS);\r\n  if (!code || code === \"0x\") {\r\n    throw new Error(\r\n      \"Invalid CONTRACT_ADDRESS: no contract bytecode found. Set CONTRACT_ADDRESS to the deployed AcademicRecords contract address.\"\r\n    );\r\n  }\r\n\r\n  contractCodeValidated = true;\r\n}\r\n\r\nexport { provider, wallet, contract };\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAEA,SAAS;IACP,MAAM,WAAW;QAAC;QAAe;KAAmB;IACpD,MAAM,UAAU,SAAS,MAAM,CAAC,CAAC,MAAQ,CAAC,QAAQ,GAAG,CAAC,IAAI;IAE1D,IAAI,QAAQ,MAAM,GAAG,GAAG;QACtB,MAAM,IAAI,MAAM,CAAC,wCAAwC,EAAE,QAAQ,IAAI,CAAC,OAAO;IACjF;AACF;AAEA;AAEA,kEAAkE;AAClE,4DAA4D;AAC5D,MAAM,WAAW,IAAI,4LAAM,CAAC,eAAe,CAAC,QAAQ,GAAG,CAAC,OAAO,IAAI;AAEnE,4EAA4E;AAC5E,+EAA+E;AAC/E,MAAM,SAAS,IAAI,4LAAM,CAAC,MAAM,CAAC,QAAQ,GAAG,CAAC,WAAW,EAAE;AAE1D,iDAAiD;AACjD,0BAA0B;AAC1B,yDAAyD;AACzD,uCAAuC;AACvC,uCAAuC;AACvC,wDAAwD;AACxD,MAAM,WAAW,IAAI,4LAAM,CAAC,QAAQ,CAAC,QAAQ,GAAG,CAAC,gBAAgB,EAAE,gKAAG,EAAE;AAExE,IAAI,wBAAwB;AAErB,eAAe;IACpB,IAAI,uBAAuB;QACzB;IACF;IAEA,MAAM,OAAO,MAAM,SAAS,OAAO,CAAC,QAAQ,GAAG,CAAC,gBAAgB;IAChE,IAAI,CAAC,QAAQ,SAAS,MAAM;QAC1B,MAAM,IAAI,MACR;IAEJ;IAEA,wBAAwB;AAC1B"}},
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ahmed/Desktop/Fifth%20semester/blockchain/project/frontend/app/api/verify/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { contract, ensureContractIsDeployed } from \"../../lib/blockchain\";\r\n\r\nexport const runtime = \"nodejs\";\r\n\r\nexport async function POST(request) {\r\n  try {\r\n    await ensureContractIsDeployed();\r\n\r\n    const body = await request.json();\r\n    const { studentId } = body;\r\n\r\n    if (!studentId) {\r\n      return NextResponse.json(\r\n        { success: false, error: \"studentId is required\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const record = await contract.verifyRecord(studentId);\r\n\r\n    return NextResponse.json(\r\n      {\r\n        success: true,\r\n        data: {\r\n          studentId: record.studentId,\r\n          documentHash: record.documentHash,\r\n          issuer: record.issuer,\r\n          timestamp: record.timestamp.toString(),\r\n          isValid: record.isValid,\r\n        },\r\n      },\r\n      { status: 200 }\r\n    );\r\n  } catch (error) {\r\n    console.error(\"Verify API error:\", error);\r\n\r\n    const message = error.shortMessage || error.message || \"Internal server error\";\r\n    const isNotFound = message.includes(\"Record not found\");\r\n\r\n    return NextResponse.json(\r\n      { success: false, error: message },\r\n      { status: isNotFound ? 404 : 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,MAAM,UAAU;AAEhB,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,IAAA,yNAAwB;QAE9B,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,SAAS,EAAE,GAAG;QAEtB,IAAI,CAAC,WAAW;YACd,OAAO,mNAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,OAAO;YAAwB,GACjD;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,SAAS,MAAM,yMAAQ,CAAC,YAAY,CAAC;QAE3C,OAAO,mNAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,MAAM;gBACJ,WAAW,OAAO,SAAS;gBAC3B,cAAc,OAAO,YAAY;gBACjC,QAAQ,OAAO,MAAM;gBACrB,WAAW,OAAO,SAAS,CAAC,QAAQ;gBACpC,SAAS,OAAO,OAAO;YACzB;QACF,GACA;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qBAAqB;QAEnC,MAAM,UAAU,MAAM,YAAY,IAAI,MAAM,OAAO,IAAI;QACvD,MAAM,aAAa,QAAQ,QAAQ,CAAC;QAEpC,OAAO,mNAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,OAAO;QAAQ,GACjC;YAAE,QAAQ,aAAa,MAAM;QAAI;IAErC;AACF"}}]
}